{% extends 'mainapp/base.html' %}
{% load static %}

{% block top %}
    <div class="top">
        {% include 'mainapp/includes/inc__main_menu.html' %}
        <div class="catalog-content">
            <div class="catalog-sidebar">

                {% for category in categories.items %}

                    <div class="catalog-category">
                        <a href="{% url 'main:catalog' category.0.id 0 1 %}" class="catalog-category-link">{{ category.0.name }}</a>
                        <div class="catalog-subcategory-list">
                            {% for subcategory in category.1 %}

                                <div class="catalog-subcategory">
                                    <a href="{% url 'main:catalog' category.0.id subcategory.id 1 %}"
                                       class="catalog-subcategory-link
                                       {% if request.resolver_match.kwargs.subcategory_pk|add:'0' == subcategory.id %}
                                       active
                                       {% endif %}">{{ subcategory.name }}</a>
                                </div>

                            {% endfor %}
                        </div>
                    </div>

                {% endfor %}

            </div>
            <div class="catalog-items">

                <div class="paginator">
                    {% if products.has_previous %}
                        <a href="{% url 'main:catalog' category_pk subcategory_pk products.previous_page_number %}">
                        <
                        </a>
                    {% endif %}
                    <span class="current">
                        страница {{ products.number }} из {{ products.paginator.num_pages }}
                    </span>
                    {% if products.has_next %}
                        <a href="{% url 'main:catalog' category_pk subcategory_pk products.next_page_number %}">
                        >
                        </a>
                    {% endif %}
                </div>

                {% for product in products %}

                    <div class="catalog-item">
                        <a href="{% url 'main:product' product.id %}" class="product-link">
                            <img class="product-image" src="/media/{{ product.image }}" alt="{{ product.name }}" name="{{ product.name }}">
                            <span class="product-name-link">{{ product.name }}</span>
                        </a>
                    </div>

                {% endfor %}
            </div>
        </div>
    </div>
{% endblock %}